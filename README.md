# News_www.finam.ru_s
Сбор и сохранение новостей RSS от Finam Этот workflow автоматизирует процесс периодического сбора финансовых новостей с RSS-ленты Finam, их сохранение в базу данных и запуск последующего анализа.

<img width="752" height="351" alt="image" src="https://github.com/user-attachments/assets/c2be8d42-89d9-4b1c-8168-d7471eb9fb17" />


Основные компоненты:

Планировщик (Schedule Trigger)

Автоматически запускает workflow каждые 10 минут
Обеспечивает регулярное обновление новостной ленты


Чтение RSS (RSS Feed Read)

Загружает новости с https://www.finam.ru/international/advanced/rsspoint/
Опция ignoreSSL: true позволяет работать с сертификатами SSL без строгой проверки
Извлекает для каждой новости:

Заголовок (title)
Ссылку (link)
Дату публикации (pubDate)
Полный контент (content)
Краткое содержание (contentSnippet)
ISO дату (isoDate)




Сохранение в базу (Insert Unique News1)

Вставляет новости в PostgreSQL таблицу finam_rss
Использует ON CONFLICT (link) DO NOTHING для предотвращения дублирования:

Если новость с таким link уже существует, вставка игнорируется
Гарантирует уникальность записей по ссылке


Экранирует одинарные кавычки (' → '') для корректной работы SQL-запроса


Запуск анализа (To_analis)

Вызывает другой workflow (ID: xFQmDLneomQjt5iZ) с параметром store_news
Опция waitForSubWorkflow: false означает асинхронный запуск (не ждет завершения)
Это тот самый workflow анализа, который вы показали ранее



Логика работы:
Цикл обработки новостей:
Каждые 10 минут → Загрузка RSS → Сохранение новых записей → Запуск AI-анализа
Интеграция с первым workflow:
Этот workflow является источником данных для предыдущего:

Собирает свежие новости и устанавливает флаг new = 1 (по умолчанию при вставке)
Запускает workflow анализа
Workflow анализа обрабатывает записи с new = 1 и устанавливает new = 0 после обработки

Таким образом создается полный цикл: сбор → сохранение → анализ → уведомление.
